#!/bin/sh

echo "brew updating..."

brew update
outdated=`brew outdated`

if [ -n "$outdated" ]; then
  cat <<EOF

The following package(s) will upgrade.

$outdated

Are you sure?
If you don't want to upgrade, please type Ctrl-c now.
EOF

  read dummy

  brew upgrade
fi

if [ $(hostname) = "masutaka-pc.local" ]; then
  PRIVATE_MACHINE=1
fi

brew install ack
brew install aspell
brew install autoconf # emacs with inline.patch needs autoheader
brew install awscli
brew install binutils
brew install cmake # gem octodown
brew install direnv
brew install ghq
brew install git
brew install gnu-sed
brew install gnupg2
brew install go
brew install heroku-toolbelt
brew install homebrew/binary/jsl
brew install homebrew/binary/kindlegen
brew install hub
brew install imagemagick
brew install jq
brew install lv
brew install mackerelio/mackerel-agent/mkr
brew install markdown
brew install mercurial
brew install mongodb
brew install mysql
brew install nginx
brew install openssl # El Capitan doesn't have
brew install packer
brew install peco
brew install pkg-config # gem ref
brew install readline # Ruby
brew install terminal-notifier
brew install terraform
brew install tree
brew install unrar
brew install webkit2png # $ webkit2png -TF http://masutaka.net
brew install wget
brew install xz

if [ -n "$PRIVATE_MACHINE" ]; then
  brew install bzr	# gowebbook `$ go get github.com/stretchr/gomniauth/...`
  brew install nsq	# gowebbook
  brew install postgresql
  brew install redis
else
  brew install lha
  brew install rpm2cpio
fi

cat <<EOF
Do you want to install brew casks?
If you don't want to install, please type Ctrl-c now.
EOF

read dummy

brew cask install appcleaner
brew cask install atom
brew cask install bitbar
brew cask install docker
brew cask install dropbox
brew cask install firefox
brew cask install flash
brew cask install google-chrome
brew cask install google-cloud-sdk
brew cask install google-japanese-ime
brew cask install grandperspective
brew cask install hammerspoon
brew cask install imageoptim
brew cask install launchbar
brew cask install licecap
brew cask install quicksilver
brew cask install railwaycat/emacsmacport/emacs-mac
brew cask install trailer
brew cask install vagrant
brew cask install virtualbox

if [ -n "$PRIVATE_MACHINE" ]; then
  brew cask install google-drive
  brew cask install handbrake
  brew cask install lyn
  brew cask install ripit
  brew cask install skype
  brew cask install vlc
else
  brew cask install discord
  brew cask install mysqlworkbench
  brew cask install the-unarchiver
fi
